"use strict";(self.webpackChunkglint_site=self.webpackChunkglint_site||[]).push([[589],{8589:(nn,U,s)=>{s.r(U),s.d(U,{AccountModule:()=>tn});var L=s(2155),E=s(773),_=s(79),N=s(4466),m=s(8755),q=s(655),r=s(3075),v=s(6661),u=s(1135),y=s(515),g=s(262),b=s(8746),d=s(7573),t=s(5e3),k=s(6259),w=s(7455),c=s(9808),l=s(7322),Z=s(7531),h=s(7423),f=s(5245);function Y(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Password must have at least 10 characters "),t.qZA())}function H(o,e){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.passwordControl.getError("server").join(", ")," ")}}function F(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Password must have at least 10 characters "),t.qZA())}function j(o,e){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.newPasswordControl.getError("server").join(", ")," ")}}const R=function(){return["/account/email/lost-password"]},z=function(o){return{email:o}};function B(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){return t.CHM(n),t.oxw().change()}),t.TgZ(1,"mat-form-field",5)(2,"mat-label"),t._uU(3,"Current Password"),t.qZA(),t._UZ(4,"input",6),t.ALo(5,"async"),t.TgZ(6,"button",7),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return a.passwordHidden.next(!a.passwordHidden.value)}),t.ALo(7,"async"),t.TgZ(8,"mat-icon"),t._uU(9),t.qZA()(),t.YNc(10,Y,2,0,"mat-error",8),t.YNc(11,H,2,1,"mat-error",8),t.qZA(),t.TgZ(12,"mat-form-field",5)(13,"mat-label"),t._uU(14,"New Password"),t.qZA(),t._UZ(15,"input",9),t.ALo(16,"async"),t.TgZ(17,"button",7),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return a.newPasswordHidden.next(!a.newPasswordHidden.value)}),t.ALo(18,"async"),t.TgZ(19,"mat-icon"),t._uU(20),t.qZA()(),t.YNc(21,F,2,0,"mat-error",8),t.YNc(22,j,2,1,"mat-error",8),t.qZA(),t.TgZ(23,"button",10),t._uU(24,"Change password"),t.qZA(),t.TgZ(25,"p"),t._uU(26," Forgot your password? Click "),t.TgZ(27,"a",11),t.ALo(28,"async"),t._uU(29,"here"),t.qZA(),t._uU(30," to reset it. "),t.qZA()()}if(2&o){const n=t.oxw();let i;t.xp6(4),t.Q6J("formControl",n.passwordControl),t.uIk("type",t.lcZ(5,15,n.passwordHidden)?"password":"text"),t.xp6(2),t.Q6J("matTooltip",t.lcZ(7,17,n.passwordHidden)?"Show":"Hide"),t.xp6(3),t.Oqu(n.passwordHidden.value?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",n.passwordControl.hasError("invalid")),t.xp6(1),t.Q6J("ngIf",n.passwordControl.hasError("server")),t.xp6(4),t.Q6J("formControl",n.newPasswordControl),t.uIk("type",t.lcZ(16,19,n.newPasswordHidden)?"password":"text"),t.xp6(2),t.Q6J("matTooltip",t.lcZ(18,21,n.newPasswordHidden)?"Show":"Hide"),t.xp6(3),t.Oqu(n.newPasswordHidden.value?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",n.newPasswordControl.hasError("invalid")),t.xp6(1),t.Q6J("ngIf",n.newPasswordControl.hasError("server")),t.xp6(1),t.Q6J("disabled",n.processing),t.xp6(4),t.Q6J("routerLink",t.DdM(25,R))("queryParams",t.VKq(26,z,null==(i=t.lcZ(28,23,n.user))?null:i.email))}}function D(o,e){1&o&&(t.TgZ(0,"h3"),t._uU(1," Password changed successfully!"),t._UZ(2,"br"),t._uU(3," Redirecting... "),t.qZA())}function X(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"h3")(1,"mat-icon",12),t._uU(2,"warning"),t.qZA(),t._UZ(3,"br"),t._uU(4," Sorry! Something went wrong."),t._UZ(5,"br"),t._uU(6," Please click "),t.TgZ(7,"span",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().reset()}),t._uU(8,"here"),t.qZA(),t._uU(9," to try again."),t._UZ(10,"br"),t._uU(11," If the problem persists please contact support at "),t.TgZ(12,"a",14),t._uU(13,"help@glint.info"),t.qZA(),t._uU(14,". "),t.qZA()}}class x{constructor(e,n,i){this.cdr=e,this.router=n,this.api=i,this.passwordControl=new r.NI(null,[r.kI.required,r.kI.minLength(10)]),this.newPasswordControl=new r.NI(null,[r.kI.required,r.kI.minLength(10)]),this.view=new u.X("init"),this.passwordHidden=new u.X(!0),this.newPasswordHidden=new u.X(!0),this.processing=!1}change(){this.processing||(this.processing=!0,this.api.changePassword(this.passwordControl.value,this.newPasswordControl.value).pipe((0,g.K)(e=>{if(400===e.status){const n=[],i=[];for(const a of e.error.errors)"password"===a.param?n.push(a.msg):"newPassword"===a.param&&i.push(a.msg);this.passwordControl.setErrors(n.length>0?{server:n}:null),this.newPasswordControl.setErrors(i.length>0?{server:i}:null)}else this.view.next("error");return y.E}),(0,b.x)(()=>{this.processing=!1,this.cdr.markForCheck()})).subscribe(()=>{this.view.next("success"),this.router.navigate(["/account"])}))}reset(){this.passwordControl.reset(),this.newPasswordControl.reset(),this.view.next("init")}}x.\u0275fac=function(e){return new(e||x)(t.Y36(t.sBO),t.Y36(m.F0),t.Y36(k.s))},x.\u0275cmp=t.Xpm({type:x,selectors:[["ng-component"]],decls:8,vars:6,consts:[[1,"mat-display-2","title"],[3,"ngSwitch"],[3,"ngSubmit",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"ngSubmit"],["appearance","outline",1,"form-field"],["matInput","","required","","placeholder","Enter your password...",3,"formControl"],["type","button","matSuffix","","mat-icon-button","",3,"matTooltip","click"],[4,"ngIf"],["matInput","","required","","placeholder","Enter a new password...",3,"formControl"],["type","submit","mat-stroked-button","",1,"submit-btn",3,"disabled"],[3,"routerLink","queryParams"],["color","warn",1,"error-icon"],[1,"reset",3,"click"],["href","mailto:help@glint.info"]],template:function(e,n){1&e&&(t.TgZ(0,"app-container")(1,"header",0),t._uU(2,"Change Password"),t.qZA(),t.ynx(3,1),t.ALo(4,"async"),t.YNc(5,B,31,28,"form",2),t.YNc(6,D,4,0,"h3",3),t.YNc(7,X,15,0,"h3",3),t.BQk(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngSwitch",t.lcZ(4,4,n.view)),t.xp6(2),t.Q6J("ngSwitchCase","init"),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","error"))},directives:[w.e,c.RF,c.n9,r._Y,r.JL,r.F,l.KE,l.hX,Z.Nt,r.Fj,r.Q7,r.JJ,r.oH,h.lW,l.R9,_.gM,f.Hw,c.O5,l.TO,m.yS],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:block;padding-top:40px;text-align:center}",".title[_ngcontent-%COMP%]{margin-bottom:50px}","form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}",".form-field[_ngcontent-%COMP%]{min-width:250px;max-width:400px;width:100%;margin-bottom:10px}","a[_ngcontent-%COMP%], .reset[_ngcontent-%COMP%]{color:#90a4ae}",".submit-btn[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:40px}",".error-icon[_ngcontent-%COMP%]{font-size:48px}"],changeDetection:0}),(0,q.gn)([(0,v.Ph)(d.jq.user)],x.prototype,"user",void 0);var O=s(2340),A=s(520);function $(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid email address "),t.qZA())}function K(o,e){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.emailControl.getError("server").join(", ")," ")}}function V(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Password must have at least 10 characters "),t.qZA())}function W(o,e){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.passwordControl.getError("server").join(", ")," ")}}const G=function(){return["/account/email/lost-password"]},tt=function(){return["/account/email/register"]};function nt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){return t.CHM(n),t.oxw().login()}),t.TgZ(1,"mat-form-field",5)(2,"mat-label"),t._uU(3,"Email"),t.qZA(),t._UZ(4,"input",6),t.YNc(5,$,2,0,"mat-error",7),t.YNc(6,K,2,1,"mat-error",7),t.qZA(),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",8),t.ALo(11,"async"),t.TgZ(12,"button",9),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return a.passwordHidden.next(!a.passwordHidden.value)}),t.ALo(13,"async"),t.TgZ(14,"mat-icon"),t._uU(15),t.qZA()(),t.YNc(16,V,2,0,"mat-error",7),t.YNc(17,W,2,1,"mat-error",7),t.qZA(),t.TgZ(18,"button",10),t._uU(19,"Login"),t.qZA(),t.TgZ(20,"p"),t._uU(21,"Forgot your password? Click "),t.TgZ(22,"a",11),t._uU(23,"here"),t.qZA(),t._uU(24," to reset it."),t.qZA(),t.TgZ(25,"p"),t._uU(26,"Don't have an account? Click "),t.TgZ(27,"a",11),t._uU(28,"here"),t.qZA(),t._uU(29," to register."),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(4),t.Q6J("formControl",n.emailControl),t.xp6(1),t.Q6J("ngIf",n.emailControl.hasError("invalid")),t.xp6(1),t.Q6J("ngIf",n.emailControl.hasError("server")),t.xp6(4),t.Q6J("formControl",n.passwordControl),t.uIk("type",t.lcZ(11,12,n.passwordHidden)?"password":"text"),t.xp6(2),t.Q6J("matTooltip",t.lcZ(13,14,n.passwordHidden)?"Show":"Hide"),t.xp6(3),t.Oqu(n.passwordHidden.value?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",n.passwordControl.hasError("invalid")),t.xp6(1),t.Q6J("ngIf",n.passwordControl.hasError("server")),t.xp6(1),t.Q6J("disabled",n.processing),t.xp6(4),t.Q6J("routerLink",t.DdM(16,G)),t.xp6(5),t.Q6J("routerLink",t.DdM(17,tt))}}function ot(o,e){1&o&&(t.TgZ(0,"h3"),t._uU(1," Logged in successfully!"),t._UZ(2,"br"),t._uU(3," Redirecting... "),t.qZA())}function et(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"h3")(1,"mat-icon",12),t._uU(2,"warning"),t.qZA(),t._UZ(3,"br"),t._uU(4," Sorry! Something went wrong."),t._UZ(5,"br"),t._uU(6," Please click "),t.TgZ(7,"span",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().reset()}),t._uU(8,"here"),t.qZA(),t._uU(9," to try again."),t._UZ(10,"br"),t._uU(11," If the problem persists please contact support at "),t.TgZ(12,"a",14),t._uU(13,"help@glint.info"),t.qZA(),t._uU(14,". "),t.qZA()}}let it=(()=>{class o{constructor(n,i,a,p){this.cdr=n,this.http=i,this.router=a,this.store=p,this.emailControl=new r.NI(null,[r.kI.required,r.kI.email]),this.passwordControl=new r.NI(null,[r.kI.required,r.kI.minLength(10)]),this.view=new u.X("init"),this.passwordHidden=new u.X(!0),this.processing=!1}login(){this.processing||(this.processing=!0,this.http.post(`${O.N.apiBaseUrl}/auth/email/login`,{email:this.emailControl.value,password:this.passwordControl.value}).pipe((0,g.K)(n=>{if(400===n.status){const i=[],a=[];for(const p of n.error.errors)"email"===p.param?i.push(p.msg):"password"===p.param&&a.push(p.msg);this.emailControl.setErrors(i.length>0?{server:i}:null),this.passwordControl.setErrors(a.length>0?{server:a}:null)}else this.view.next("error");return y.E}),(0,b.x)(()=>{this.processing=!1,this.cdr.markForCheck()})).subscribe(({user:n})=>{this.view.next("success"),this.store.dispatch(new d.Rl(n)).subscribe(()=>{this.router.navigate(["/account"])})}))}reset(){this.emailControl.reset(),this.passwordControl.reset(),this.view.next("init")}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.sBO),t.Y36(A.eN),t.Y36(m.F0),t.Y36(v.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:8,vars:6,consts:[[1,"mat-display-2","title"],[3,"ngSwitch"],[3,"ngSubmit",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"ngSubmit"],["appearance","outline",1,"form-field"],["type","email","matInput","","required","","placeholder","Enter your email address...",3,"formControl"],[4,"ngIf"],["matInput","","required","","placeholder","Enter your password...",3,"formControl"],["type","button","matSuffix","","mat-icon-button","",3,"matTooltip","click"],["type","submit","mat-stroked-button","",1,"submit-btn",3,"disabled"],[3,"routerLink"],["color","warn",1,"error-icon"],[1,"reset",3,"click"],["href","mailto:help@glint.info"]],template:function(n,i){1&n&&(t.TgZ(0,"app-container")(1,"header",0),t._uU(2,"Login"),t.qZA(),t.ynx(3,1),t.ALo(4,"async"),t.YNc(5,nt,30,18,"form",2),t.YNc(6,ot,4,0,"h3",3),t.YNc(7,et,15,0,"h3",3),t.BQk(),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngSwitch",t.lcZ(4,4,i.view)),t.xp6(2),t.Q6J("ngSwitchCase","init"),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","error"))},directives:[w.e,c.RF,c.n9,r._Y,r.JL,r.F,l.KE,l.hX,Z.Nt,r.Fj,r.Q7,r.JJ,r.oH,c.O5,l.TO,h.lW,l.R9,_.gM,f.Hw,m.yS],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:block;padding-top:40px;text-align:center}",".title[_ngcontent-%COMP%]{margin-bottom:50px}","form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}",".form-field[_ngcontent-%COMP%]{min-width:250px;max-width:400px;width:100%;margin-bottom:10px}","a[_ngcontent-%COMP%], .reset[_ngcontent-%COMP%]{color:#90a4ae}",".submit-btn[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:40px}",".error-icon[_ngcontent-%COMP%]{font-size:48px}"],changeDetection:0}),o})();function rt(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid email address "),t.qZA())}function at(o,e){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.form.controls.email.getError("server").join(", ")," ")}}function st(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Password must have at least 10 characters "),t.qZA())}function ct(o,e){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.form.controls.password.getError("server").join(", ")," ")}}function lt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){return t.CHM(n),t.oxw().register()}),t.TgZ(1,"mat-form-field",5)(2,"mat-label"),t._uU(3,"Email"),t.qZA(),t._UZ(4,"input",6),t.YNc(5,rt,2,0,"mat-error",7),t.YNc(6,at,2,1,"mat-error",7),t.qZA(),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",8),t.ALo(11,"async"),t.TgZ(12,"button",9),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return a.passwordHidden.next(!a.passwordHidden.value)}),t.ALo(13,"async"),t.TgZ(14,"mat-icon"),t._uU(15),t.qZA()(),t.YNc(16,st,2,0,"mat-error",7),t.YNc(17,ct,2,1,"mat-error",7),t.qZA(),t.TgZ(18,"button",10),t._uU(19,"Create account"),t.qZA()()}if(2&o){const n=t.oxw();t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("ngIf",n.form.controls.email.hasError("email")),t.xp6(1),t.Q6J("ngIf",n.form.controls.email.hasError("server")),t.xp6(4),t.uIk("type",t.lcZ(11,9,n.passwordHidden)?"password":"text"),t.xp6(2),t.Q6J("matTooltip",t.lcZ(13,11,n.passwordHidden)?"Show":"Hide"),t.xp6(3),t.Oqu(n.passwordHidden.value?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",n.form.controls.password.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",n.form.controls.password.hasError("server")),t.xp6(1),t.Q6J("disabled",n.processing)}}function pt(o,e){1&o&&(t.TgZ(0,"h3"),t._uU(1," New account created!"),t._UZ(2,"br"),t._uU(3," Please click the link in your email to confirm your registration."),t._UZ(4,"br"),t._uU(5," Click "),t.TgZ(6,"a",11),t._uU(7,"here"),t.qZA(),t._uU(8," to login. "),t.qZA())}function mt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"h3")(1,"mat-icon",12),t._uU(2,"warning"),t.qZA(),t._UZ(3,"br"),t._uU(4," Sorry! Something went wrong."),t._UZ(5,"br"),t._uU(6," Please click "),t.TgZ(7,"span",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().reset()}),t._uU(8,"here"),t.qZA(),t._uU(9," to try again."),t._UZ(10,"br"),t._uU(11," If the problem persists please contact support at "),t.TgZ(12,"a",14),t._uU(13,"help@glint.info"),t.qZA(),t._uU(14,". "),t.qZA()}}let ut=(()=>{class o{constructor(n,i){this.cdr=n,this.http=i,this.form=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email]),password:new r.NI(null,[r.kI.required,r.kI.minLength(10)])}),this.view=new u.X("init"),this.passwordHidden=new u.X(!0),this.processing=!1}register(){this.processing||(this.processing=!0,this.http.post(`${O.N.apiBaseUrl}/auth/email/register`,{email:this.form.controls.email.value,password:this.form.controls.password.value}).pipe((0,g.K)(a=>{if(400===a.status&&"validation"===a.error.reason){const p=[],M=[];for(const T of a.error.errors)"email"===T.param?p.push(T.msg):"password"===T.param&&M.push(T.msg);this.form.controls.email.setErrors(p.length>0?{server:p}:null),this.form.controls.password.setErrors(M.length>0?{server:M}:null)}else this.view.next("error");return y.E}),(0,b.x)(()=>{this.processing=!1,this.cdr.markForCheck()})).subscribe(()=>{this.view.next("success")}))}reset(){this.form.reset(),this.view.next("init")}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.sBO),t.Y36(A.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:8,vars:6,consts:[[1,"mat-display-2","title"],[3,"ngSwitch"],[3,"formGroup","ngSubmit",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"form-field"],["type","email","matInput","","required","","formControlName","email","placeholder","Enter your email address..."],[4,"ngIf"],["matInput","","required","","formControlName","password","placeholder","Choose a password..."],["type","button","matSuffix","","mat-icon-button","",3,"matTooltip","click"],["type","submit","mat-stroked-button","",1,"submit-btn",3,"disabled"],["routerLink","/account/email/login"],["color","warn",1,"error-icon"],[1,"reset",3,"click"],["href","mailto:help@glint.info"]],template:function(n,i){1&n&&(t.TgZ(0,"app-container")(1,"header",0),t._uU(2,"Register"),t.qZA(),t.ynx(3,1),t.ALo(4,"async"),t.YNc(5,lt,20,13,"form",2),t.YNc(6,pt,9,0,"h3",3),t.YNc(7,mt,15,0,"h3",3),t.BQk(),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngSwitch",t.lcZ(4,4,i.view)),t.xp6(2),t.Q6J("ngSwitchCase","init"),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","error"))},directives:[w.e,c.RF,c.n9,r._Y,r.JL,r.sg,l.KE,l.hX,Z.Nt,r.Fj,r.Q7,r.JJ,r.u,c.O5,l.TO,h.lW,l.R9,_.gM,f.Hw,m.yS],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:block;padding-top:40px;text-align:center}",".title[_ngcontent-%COMP%]{margin-bottom:50px}","form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}",".form-field[_ngcontent-%COMP%]{min-width:250px;max-width:400px;width:100%;margin-bottom:10px}","a[_ngcontent-%COMP%], .reset[_ngcontent-%COMP%]{color:#90a4ae}",".submit-btn[_ngcontent-%COMP%]{margin-top:10px}",".error-icon[_ngcontent-%COMP%]{font-size:48px}"],changeDetection:0}),o})();var J=s(2722),I=s(7947);function gt(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid email "),t.qZA())}function _t(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){return t.CHM(n),t.oxw().resetPassword()}),t.TgZ(1,"mat-form-field",5)(2,"mat-label"),t._uU(3,"Email"),t.qZA(),t._UZ(4,"input",6),t.YNc(5,gt,2,0,"mat-error",7),t.qZA(),t.TgZ(6,"div")(7,"button",8),t._uU(8,"Reset password"),t.qZA()()()}if(2&o){const n=t.oxw();t.xp6(4),t.Q6J("formControl",n.emailControl),t.xp6(1),t.Q6J("ngIf",n.emailControl.hasError("email"))}}function dt(o,e){1&o&&(t.ynx(0),t.TgZ(1,"h3"),t._uU(2,"Processing..."),t.qZA(),t.BQk())}function ht(o,e){1&o&&(t.ynx(0),t.TgZ(1,"h3"),t._uU(2," Please check your email, if an account has been registered with it then a password reset link has been sent. "),t.qZA(),t.BQk())}const ft=function(){return["/auth/lost-password"]};function xt(o,e){1&o&&(t.ynx(0),t.TgZ(1,"h3")(2,"mat-icon",9),t._uU(3,"warning"),t.qZA(),t._UZ(4,"br"),t._uU(5," Sorry! Something went wrong."),t._UZ(6,"br"),t._uU(7," Please click "),t.TgZ(8,"a",10),t._uU(9,"here"),t.qZA(),t._uU(10," to try again."),t._UZ(11,"br"),t._uU(12," If the problem persists please contact support at "),t.TgZ(13,"a",11),t._uU(14,"help@glint.info"),t.qZA(),t._uU(15,". "),t.qZA(),t.BQk()),2&o&&(t.xp6(8),t.Q6J("routerLink",t.DdM(1,ft)))}let Ct=(()=>{class o extends I.H{constructor(n,i){super(),this.http=n,this.route=i,this.emailControl=new r.NI(null,[r.kI.email,r.kI.required]),this.view=new u.X("init")}ngOnInit(){this.route.queryParams.pipe((0,J.R)(this.destroyed$)).subscribe(n=>{n.email&&this.emailControl.setValue(n.email)})}resetPassword(){this.emailControl.invalid||"processing"!==this.view.value&&(this.view.next("processing"),this.http.post(`${O.N.apiBaseUrl}/auth/email/lost-password`,{email:this.emailControl.value}).pipe((0,g.K)(n=>("validation"===n.reason?this.emailControl.setErrors({server:n.message}):this.view.next("error"),y.E))).subscribe(()=>{this.view.next("success")}))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A.eN),t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t.qOj],decls:9,vars:7,consts:[[1,"mat-display-2","title"],[3,"ngSwitch"],[3,"ngSubmit",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"ngSubmit"],[1,"form-field"],["matInput","","required","",3,"formControl"],[4,"ngIf"],["type","submit","mat-stroked-button","",1,"submit-btn"],["color","warn",1,"error-icon"],[3,"routerLink"],["href","mailto:help@glint.info"]],template:function(n,i){1&n&&(t.TgZ(0,"app-container")(1,"header",0),t._uU(2,"Reset Password"),t.qZA(),t.ynx(3,1),t.ALo(4,"async"),t.YNc(5,_t,9,2,"form",2),t.YNc(6,dt,3,0,"ng-container",3),t.YNc(7,ht,3,0,"ng-container",3),t.YNc(8,xt,16,2,"ng-container",3),t.BQk(),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngSwitch",t.lcZ(4,5,i.view)),t.xp6(2),t.Q6J("ngSwitchCase","init"),t.xp6(1),t.Q6J("ngSwitchCase","processing"),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","error"))},directives:[w.e,c.RF,c.n9,r._Y,r.JL,r.F,l.KE,l.hX,Z.Nt,r.Fj,r.Q7,r.JJ,r.oH,c.O5,l.TO,h.lW,f.Hw,m.yS],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:block;padding-top:40px;text-align:center}",".title[_ngcontent-%COMP%]{margin-bottom:50px}","form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}",".form-field[_ngcontent-%COMP%]{min-width:250px;max-width:400px;width:100%;margin-bottom:10px}","a[_ngcontent-%COMP%], .reset[_ngcontent-%COMP%]{color:#90a4ae}",".submit-btn[_ngcontent-%COMP%]{margin-top:10px}",".error-icon[_ngcontent-%COMP%]{font-size:48px}"],changeDetection:0}),o})();const bt=function(){return["/account/email/login"]},wt=function(){return["/account/github/login"]},Zt=function(){return["/account/google/login"]},Pt=function(){return["/account/email/register"]};let Mt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:34,vars:8,consts:[[1,"mat-display-2","title"],[1,"login-methods"],[3,"routerLink"],["type","button","mat-stroked-button",""],["matTooltip","Not available yet",3,"routerLink"],["type","button","mat-stroked-button","","disabled",""],["version","1.1","width","22","height","22","aria-hidden","true","viewBox","0 0 16 16","fill","currentColor"],["fill-rule","evenodd","d","M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"],["version","1.1","width","22","height","22","aria-hidden","true","viewBox","0 0 32 32","fill","currentColor"],["id","A","d","M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"],["id","B"],[0,"xlink","href","#A"],["transform","matrix(.727273 0 0 .727273 -.954545 -1.45455)"],["d","M0 37V11l17 13z","clip-path","url(#B)"],["d","M0 11l17 13 7-6.1L48 14V0H0z","clip-path","url(#B)"],["d","M0 37l30-23 7.9 1L48 0v48H0z","clip-path","url(#B)"],["d","M48 48L17 24l-4-3 35-10z","clip-path","url(#B)"],[1,"link",3,"routerLink"]],template:function(n,i){1&n&&(t.TgZ(0,"header",0),t._uU(1,"Login"),t.qZA(),t.TgZ(2,"div",1)(3,"a",2)(4,"button",3)(5,"mat-icon"),t._uU(6,"mail"),t.qZA(),t.TgZ(7,"span"),t._uU(8,"with Email"),t.qZA()()(),t.TgZ(9,"a",4)(10,"button",5),t.O4$(),t.TgZ(11,"svg",6),t._UZ(12,"path",7),t.qZA(),t.kcU(),t.TgZ(13,"span"),t._uU(14,"with GitHub"),t.qZA()()(),t.TgZ(15,"a",4)(16,"button",5),t.O4$(),t.TgZ(17,"svg",8)(18,"defs"),t._UZ(19,"path",9),t.qZA(),t.TgZ(20,"clipPath",10),t._UZ(21,"use",11),t.qZA(),t.TgZ(22,"g",12),t._UZ(23,"path",13)(24,"path",14)(25,"path",15)(26,"path",16),t.qZA()(),t.kcU(),t.TgZ(27,"span"),t._uU(28,"with Google"),t.qZA()()()(),t.TgZ(29,"p"),t._uU(30,"Don't have an account? Click "),t.TgZ(31,"a",17),t._uU(32,"here"),t.qZA(),t._uU(33," to register."),t.qZA()),2&n&&(t.xp6(3),t.Q6J("routerLink",t.DdM(4,bt)),t.xp6(6),t.Q6J("routerLink",t.DdM(5,wt)),t.xp6(6),t.Q6J("routerLink",t.DdM(6,Zt)),t.xp6(16),t.Q6J("routerLink",t.DdM(7,Pt)))},directives:[m.yS,h.lW,f.Hw,_.gM],styles:["[_nghost-%COMP%]{display:block;padding-top:40px;text-align:center}",".title[_ngcontent-%COMP%]{margin-bottom:50px}",".link[_ngcontent-%COMP%]{color:#90a4ae}",".login-methods[_ngcontent-%COMP%]{display:inline-block;margin-bottom:40px}.login-methods[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;margin-bottom:10px}.login-methods[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-size:0}.login-methods[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:-11px}.login-methods[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .login-methods[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:10px}.login-methods[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}"],changeDetection:0}),o})();var vt=s(7579),yt=s(9841),Tt=s(3900),P=s(2843),Ot=s(8505),Q=s(7093),S=s(3322);function At(o,e){1&o&&t._UZ(0,"mat-spinner")}function Ut(o,e){if(1&o&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&o){const n=t.oxw(3);t.Q6J("matTooltip","Your subscription is paid for by "+n.yourSubscription),t.xp6(1),t.hij(" (Provided by ",n.yourSubscription,") ")}}function Et(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).purchase(1,!0)}),t._uU(1,"Upgrade"),t.qZA()}}function qt(o,e){if(1&o&&(t.TgZ(0,"div",29)(1,"mat-icon",30),t._uU(2,"warning"),t.qZA(),t._uU(3),t.qZA()),2&o){const n=e.ngIf;t.xp6(3),t.hij(" ",n," ")}}function kt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).manage()}),t._uU(1,"Manage payments"),t.qZA()}}function Jt(o,e){if(1&o&&(t.TgZ(0,"div",32)(1,"mat-icon",30),t._uU(2,"warning"),t.qZA(),t._uU(3),t.qZA()),2&o){const n=e.ngIf;t.xp6(3),t.hij(" ",n," ")}}function It(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Must be greater than 0 "),t.qZA())}function Qt(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Must be less than 100 "),t.qZA())}function St(o,e){if(1&o&&(t.TgZ(0,"span",44)(1,"mat-icon",45),t._uU(2,"schedule"),t.qZA(),t.TgZ(3,"span",46),t._uU(4,"Expires on"),t.qZA(),t._uU(5),t.ALo(6,"date"),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,1,n.expiryDate)," ")}}function Lt(o,e){if(1&o&&(t.TgZ(0,"span",47)(1,"mat-icon",45),t._uU(2,"pause"),t.qZA(),t.TgZ(3,"span",46),t._uU(4,"Paused until"),t.qZA(),t._uU(5),t.ALo(6,"date"),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,1,n.pausedUntil)," ")}}function Nt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit;return t.oxw(4).assign(a.email)}),t.TgZ(1,"mat-icon",49),t._uU(2,"restart_alt"),t.qZA()()}}function Yt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit;return t.oxw(4).unassign(a)}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA()()}if(2&o){const n=t.oxw().$implicit;t.Q6J("matTooltip",n.activated?"Unassign subscription at the end of the billing period":"Unassign subscription"),t.xp6(1),t.ekj("nudge-right",n.activated),t.xp6(1),t.hij(" ",n.activated?"auto_delete":"delete"," ")}}function Ht(o,e){if(1&o&&(t.TgZ(0,"li")(1,"span",39),t._uU(2),t.qZA(),t.YNc(3,St,7,3,"span",40),t.YNc(4,Lt,7,3,"span",41),t.YNc(5,Nt,3,0,"button",42),t.YNc(6,Yt,3,4,"button",43),t.qZA()),2&o){const n=e.$implicit;t.xp6(1),t.Q6J("matTooltip",n.email),t.xp6(1),t.Oqu(n.email),t.xp6(1),t.Q6J("ngIf",!n.autoRenew),t.xp6(1),t.Q6J("ngIf",n.autoRenew&&n.pausedUntil),t.xp6(1),t.Q6J("ngIf",!n.autoRenew),t.xp6(1),t.Q6J("ngIf",n.autoRenew)}}function Ft(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid email "),t.qZA())}function jt(o,e){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const n=t.oxw(5);t.xp6(1),t.hij(" ",n.assignEmailControl.getError("server").join(", ")," ")}}function Rt(o,e){if(1&o&&(t.TgZ(0,"mat-form-field",51)(1,"mat-label"),t._uU(2,"Assign a subscription"),t.qZA(),t._UZ(3,"input",52),t.YNc(4,Ft,2,0,"mat-error",0),t.YNc(5,jt,2,1,"mat-error",0),t.qZA()),2&o){const n=t.oxw(4);t.xp6(3),t.Q6J("formControl",n.assignEmailControl),t.xp6(1),t.Q6J("ngIf",n.assignEmailControl.hasError("email")),t.xp6(1),t.Q6J("ngIf",n.assignEmailControl.hasError("server"))}}function zt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(4);return a.assign(a.assignEmailControl.value),a.assignEmailControl.reset()}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA()()}if(2&o){const n=t.oxw(4);t.Q6J("disabled",!n.assignEmailControl.value||n.assignEmailControl.invalid)}}function Bt(o,e){if(1&o&&(t.TgZ(0,"div",54)(1,"mat-icon",30),t._uU(2,"info"),t.qZA(),t._uU(3,"You have "),t.TgZ(4,"span",20),t._uU(5),t.qZA(),t._uU(6),t.qZA()),2&o){const n=t.oxw(4);t.xp6(5),t.Oqu(n.totalPurchased-n.assigned.length),t.xp6(1),t.AsE(" unassigned subscription",n.totalPurchased-n.assigned.length>1?"s":"",". You can assign the remaining one",n.totalPurchased-n.assigned.length>1?"s":"",", or cancel excess subscriptions by clicking the Manage Payments button and reducing the subscription quantity. ")}}function Dt(o,e){if(1&o&&(t.TgZ(0,"div",33)(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"ul",34),t.YNc(4,Ht,7,6,"li",35),t.qZA(),t.YNc(5,Rt,6,3,"mat-form-field",36),t.YNc(6,zt,3,1,"button",37),t.YNc(7,Bt,7,3,"div",38),t.qZA()),2&o){const n=t.oxw(3);t.xp6(2),t.hij("Assigned subscriptions (",n.assigned.length,"):"),t.xp6(2),t.Q6J("ngForOf",n.assigned),t.xp6(1),t.Q6J("ngIf",n.totalPurchased>n.assigned.length),t.xp6(1),t.Q6J("ngIf",n.totalPurchased>n.assigned.length),t.xp6(1),t.Q6J("ngIf",n.totalPurchased>n.assigned.length)}}const Xt=function(){return{"margin-left":"10px"}};function $t(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"main",6),t._UZ(1,"div",7),t.TgZ(2,"div",8)(3,"div",9)(4,"div",10)(5,"h1",11),t._uU(6," Your plan: "),t.TgZ(7,"span"),t._uU(8),t.qZA()(),t.YNc(9,Ut,2,2,"span",12),t.YNc(10,Et,2,0,"button",13),t.qZA(),t.YNc(11,qt,4,1,"div",14),t.ALo(12,"async"),t.qZA(),t.TgZ(13,"h1",15)(14,"span"),t._uU(15,"Manage Subscriptions"),t.qZA(),t.YNc(16,kt,2,0,"button",16),t.qZA(),t.YNc(17,Jt,4,1,"div",17),t.ALo(18,"async"),t.TgZ(19,"div",18)(20,"h3",19),t._uU(21," Subscriptions purchased: "),t.TgZ(22,"span",20),t._uU(23),t.qZA()(),t.TgZ(24,"div",21)(25,"mat-form-field")(26,"mat-label"),t._uU(27,"Quantity"),t.qZA(),t._UZ(28,"input",22),t.TgZ(29,"mat-hint",23)(30,"mat-icon",24),t._uU(31,"info"),t.qZA(),t._uU(32," Buy more subscriptions "),t.qZA(),t.YNc(33,It,2,0,"mat-error",0),t.YNc(34,Qt,2,0,"mat-error",0),t.qZA(),t.TgZ(35,"button",25),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(2);return a.purchase(a.quantityControl.value,!1)}),t._uU(36,"Purchase"),t.qZA()()(),t.YNc(37,Dt,8,5,"div",26),t.qZA(),t._UZ(38,"div",7),t.qZA()}if(2&o){const n=e.ngIf,i=t.oxw(2);t.xp6(7),t.ekj("highlight",i.yourSubscription),t.xp6(1),t.Oqu(i.yourSubscription?"Premium":"Free"),t.xp6(1),t.Q6J("ngIf",i.yourSubscription&&i.yourSubscription!==n.email),t.xp6(1),t.Q6J("ngIf",!i.yourSubscription),t.xp6(1),t.Q6J("ngIf",t.lcZ(12,15,i.purchaseError)),t.xp6(5),t.Q6J("ngIf",i.totalPurchased>0),t.xp6(1),t.Q6J("ngIf",t.lcZ(18,17,i.manageError)),t.xp6(6),t.Oqu(i.totalPurchased),t.xp6(1),t.Q6J("ngStyle.gt-xs",t.DdM(19,Xt)),t.xp6(4),t.Q6J("formControl",i.quantityControl),t.xp6(5),t.Q6J("ngIf",i.quantityControl.hasError("min")),t.xp6(1),t.Q6J("ngIf",i.quantityControl.hasError("max")),t.xp6(1),t.Q6J("disabled",!i.quantityControl.value||i.quantityControl.invalid),t.xp6(2),t.Q6J("ngIf",i.totalPurchased>0)}}function Kt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"app-container")(1,"header")(2,"div",1),t._uU(3,"Your account"),t.qZA(),t.TgZ(4,"h3"),t._uU(5),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"a",2)(8,"button",3),t._uU(9,"Change password"),t.qZA()(),t.TgZ(10,"button",4),t.NdJ("click",function(){return t.CHM(n),t.oxw().logout()}),t._uU(11,"Logout"),t.qZA()(),t.YNc(12,$t,39,20,"main",5),t.ALo(13,"async"),t.qZA()}if(2&o){const n=t.oxw();let i;t.xp6(5),t.hij("You are logged in as: ",null==(i=t.lcZ(6,2,n.user))?null:i.email,""),t.xp6(7),t.Q6J("ngIf",t.lcZ(13,4,n.user))}}class C extends I.H{constructor(e,n,i,a,p){super(),this.cdr=e,this.route=n,this.router=i,this.store=a,this.api=p,this.totalPurchased=0,this.assigned=[],this.using=[],this.yourSubscription=null,this.processing=new u.X(!0),this.quantityControl=new r.NI(null,[r.kI.min(1),r.kI.max(99)]),this.assignEmailControl=new r.NI(null,r.kI.email),this.purchaseError=new u.X(null),this.manageError=new u.X(null),this.refresh$=new vt.x}ngOnInit(){if("self"===this.route.snapshot.queryParamMap.get("assign")){const n=this.store.selectSnapshot(d.jq.user);n&&this.assign(n.email)}(0,yt.a)([this.user,this.refresh$]).pipe((0,Ot.b)(()=>{this.processing.next(!0)}),(0,Tt.w)(()=>this.api.getSubscriptions()),(0,g.K)(n=>(this.processing.next(!1),403===n.status&&this.logout(),(0,P._)(()=>n))),(0,J.R)(this.destroyed$)).subscribe(({totalPurchased:n,assigned:i,using:a})=>{this.processing.next(!1),this.totalPurchased=n;const p=new Date;this.assigned=i.filter(M=>new Date(M.expiryDate)>p),this.using=a,this.yourSubscription=a.length>0?a[0]:null,this.cdr.markForCheck()}),this.store.selectSnapshot(d.jq.user)?this.refresh$.next():this.router.navigate(["/account/login"])}purchase(e,n){this.processing.value||(this.processing.next(!0),this.api.purchaseSubscriptions(e,n).pipe((0,g.K)(i=>(this.purchaseError.next(`There was a problem processing the request. Please email support at help@glint.info quoting code ${400===i.status&&"validation"===i.error.reason?"400PA":400===i.status?"400PB":"500PA"}.`),this.processing.next(!1),(0,P._)(()=>i)))).subscribe(i=>{this.purchaseError.next(null),i?window.location.href=i:this.processing.next(!1)}))}manage(){this.processing.value||(this.processing.next(!0),this.api.manageSubscriptions().pipe((0,g.K)(e=>403===e.status&&"invalid"===e.error.reason?(this.manageError.next("You have no payment details to manage. Please purchase a subscription first."),(0,P._)(()=>e)):(this.manageError.next(`There was a problem processing the request. Please email support at help@glint.info quoting code ${400===e.status?"400MA":403===e.status?"403MA":"500MA"}.`),this.processing.next(!1),(0,P._)(()=>e)))).subscribe(e=>{this.manageError.next(null),e?window.location.href=e:this.processing.next(!1)}))}assign(e){this.processing.value||(this.processing.next(!0),this.api.assignSubscription(e).pipe((0,g.K)(n=>{if(400===n.status){const i=[];for(const a of n.error.errors)"email"===a.param&&i.push(a.msg);this.assignEmailControl.setErrors(i.length>0?{server:i}:null)}else 403===n.status&&this.assignEmailControl.setErrors({server:["Unable to find available subscriptions, please check your payment settings are in working order by clicking the Manage Payments button above. If the problem persists email help@glint.info for support."]});return(0,P._)(()=>n)}),(0,b.x)(()=>{this.processing.next(!1)})).subscribe(()=>{this.refresh$.next()}))}unassign(e){this.processing.value||(this.processing.next(!0),this.api.unassignSubscription(e.email).pipe((0,b.x)(()=>{this.processing.next(!1)})).subscribe(()=>{this.refresh$.next()}))}logout(){this.store.dispatch(new d.RD).subscribe(()=>{this.router.navigate(["/account/login"])})}}C.\u0275fac=function(e){return new(e||C)(t.Y36(t.sBO),t.Y36(m.gz),t.Y36(m.F0),t.Y36(v.yh),t.Y36(k.s))},C.\u0275cmp=t.Xpm({type:C,selectors:[["ng-component"]],features:[t.qOj],decls:4,vars:6,consts:[[4,"ngIf"],[1,"mat-display-2","title"],["routerLink","/account/email/change-password"],["type","button","mat-stroked-button","","color","primary",1,"change-password-btn"],["type","button","mat-stroked-button","","color","warn",1,"logout-btn",3,"click"],["fxLayout","",4,"ngIf"],["fxLayout",""],["fxFlex","0","fxFlex.gt-md","15","fxFlex.gt-lg","20"],["fxFlex","100","fxFlex.gt-md","70","fxFlex.gt-lg","60"],[1,"your-subscription"],[1,"level"],[1,"large"],["class","small",3,"matTooltip",4,"ngIf"],["type","button","mat-stroked-button","","class","upgrade-btn","color","accent","matTooltip","Click to purchase a subscription",3,"click",4,"ngIf"],["class","errors",4,"ngIf"],["fxLayout.lt-sm","column",1,"manage-subscriptions-title"],["type","button","mat-stroked-button","","color","primary","class","manage-payments-btn","matTooltip","Click to manage payments or change the number of subscriptions",3,"click",4,"ngIf"],["class","manage-payments-errors",4,"ngIf"],["fxLayout.lt-sm","column",1,"teammate-purchase"],[1,"left"],[1,"highlight"],[1,"right",3,"ngStyle.gt-xs"],["matInput","","type","number","min","1","max","100",3,"formControl"],["align","start","matTooltip","You can buy subscriptions and assign them to other users e.g. teammates"],["inline","",1,"info-icon"],["type","button","mat-stroked-button","","color","accent","matTooltip","Click to purchase subscriptions that can be assigned to other users",1,"teammate-purchase-btn",3,"disabled","click"],["class","subscriptions",4,"ngIf"],[1,"small",3,"matTooltip"],["type","button","mat-stroked-button","","color","accent","matTooltip","Click to purchase a subscription",1,"upgrade-btn",3,"click"],[1,"errors"],["inline",""],["type","button","mat-stroked-button","","color","primary","matTooltip","Click to manage payments or change the number of subscriptions",1,"manage-payments-btn",3,"click"],[1,"manage-payments-errors"],[1,"subscriptions"],[1,"subscription-list"],[4,"ngFor","ngForOf"],["class","assign-subscription",4,"ngIf"],["type","button","mat-icon-button","","matTooltip","Assign a subscription to this user","aria-label","Assign a subscription to this user",3,"disabled","click",4,"ngIf"],["class","assign-warning",4,"ngIf"],[1,"email",3,"matTooltip"],["class","expires-warning","matTooltip","This subscription is due to expire. After expiry you may assign the subscription to another user",4,"ngIf"],["class","expires-warning","matTooltip","Payment for this subscription has been paused",4,"ngIf"],["type","button","mat-icon-button","","color","primary","matTooltip","Reinstate subscription","aria-label","Reinstate subscription",3,"click",4,"ngIf"],["type","button","mat-icon-button","","color","warn","aria-label","Unassign subscription",3,"matTooltip","click",4,"ngIf"],["matTooltip","This subscription is due to expire. After expiry you may assign the subscription to another user",1,"expires-warning"],["inline","","fxHide.gt-xs",""],["fxHide.lt-sm",""],["matTooltip","Payment for this subscription has been paused",1,"expires-warning"],["type","button","mat-icon-button","","color","primary","matTooltip","Reinstate subscription","aria-label","Reinstate subscription",3,"click"],[1,"nudge-up"],["type","button","mat-icon-button","","color","warn","aria-label","Unassign subscription",3,"matTooltip","click"],[1,"assign-subscription"],["matInput","","type","email","placeholder","Enter the user's email address...",3,"formControl"],["type","button","mat-icon-button","","matTooltip","Assign a subscription to this user","aria-label","Assign a subscription to this user",3,"disabled","click"],[1,"assign-warning"]],template:function(e,n){1&e&&(t.YNc(0,At,1,0,"mat-spinner",0),t.ALo(1,"async"),t.YNc(2,Kt,14,6,"app-container",0),t.ALo(3,"async")),2&e&&(t.Q6J("ngIf",t.lcZ(1,2,n.processing)),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,4,n.processing)))},directives:[c.O5,E.Ou,w.e,m.yS,h.lW,Q.xw,Q.yH,_.gM,f.Hw,S.Zl,l.KE,l.hX,Z.Nt,r.qQ,r.Fd,r.wV,r.Fj,r.JJ,r.oH,l.bx,l.TO,c.sg,S.b8],pipes:[c.Ov,c.uU],styles:["[_nghost-%COMP%]{display:block;padding-top:40px;text-align:center}mat-spinner[_ngcontent-%COMP%]{margin:0 auto}header[_ngcontent-%COMP%]{margin-bottom:30px}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:20px}header[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin-bottom:10px}header[_ngcontent-%COMP%]   .change-password-btn[_ngcontent-%COMP%]{margin-right:10px}main[_ngcontent-%COMP%]{text-align:left}main[_ngcontent-%COMP%]   .your-subscription[_ngcontent-%COMP%]{margin-bottom:60px}main[_ngcontent-%COMP%]   .your-subscription[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;height:36px}main[_ngcontent-%COMP%]   .your-subscription[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]   .large[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:0}main[_ngcontent-%COMP%]   .your-subscription[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:10px;margin-left:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}main[_ngcontent-%COMP%]   .your-subscription[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#ffd180}main[_ngcontent-%COMP%]   .your-subscription[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]   .upgrade-btn[_ngcontent-%COMP%]{align-self:center;margin-left:10px}main[_ngcontent-%COMP%]   .your-subscription[_ngcontent-%COMP%]   .errors[_ngcontent-%COMP%]{color:#e57373;font-size:14px;line-height:20px;margin-top:10px;margin-bottom:26px;vertical-align:middle}main[_ngcontent-%COMP%]   .your-subscription[_ngcontent-%COMP%]   .errors[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin-right:5px;vertical-align:middle}main[_ngcontent-%COMP%]   .manage-subscriptions-title[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin:0}main[_ngcontent-%COMP%]   .manage-subscriptions-title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-bottom:20px}main[_ngcontent-%COMP%]   .manage-subscriptions-title[_ngcontent-%COMP%]   .manage-payments-btn[_ngcontent-%COMP%]{margin-bottom:20px}main[_ngcontent-%COMP%]   .manage-payments-errors[_ngcontent-%COMP%]{color:#e57373;margin-bottom:26px;vertical-align:middle}main[_ngcontent-%COMP%]   .manage-payments-errors[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin-right:5px;vertical-align:middle}main[_ngcontent-%COMP%]   .teammate-purchase[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:20px}main[_ngcontent-%COMP%]   .teammate-purchase[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-shrink:0}main[_ngcontent-%COMP%]   .teammate-purchase[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#90a4ae}main[_ngcontent-%COMP%]   .teammate-purchase[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin:0 5px;width:160px}main[_ngcontent-%COMP%]   .teammate-purchase[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{margin-right:5px;vertical-align:top}main[_ngcontent-%COMP%]   .teammate-purchase[_ngcontent-%COMP%]   .teammate-purchase-btn[_ngcontent-%COMP%]{margin-left:10px}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]{margin-bottom:10px}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{margin-bottom:0}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .subscription-list[_ngcontent-%COMP%]{margin:0;padding:0;min-width:50%;max-width:100%;width:-moz-fit-content;width:fit-content}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .subscription-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;text-overflow:ellipsis;overflow-x:hidden;white-space:nowrap}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .subscription-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;flex:1}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .subscription-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .subscription-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.nudge-up[_ngcontent-%COMP%]{transform:translateY(-2.5px)}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .subscription-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.nudge-right[_ngcontent-%COMP%]{transform:translate(3.5px)}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .subscription-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .expires-warning[_ngcontent-%COMP%]{color:#b0bec5;margin-left:20px}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .subscription-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .expires-warning[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:bottom}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .assign-subscription[_ngcontent-%COMP%]{min-width:247px;margin-bottom:20px}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .assign-warning[_ngcontent-%COMP%]{color:#b0bec5}main[_ngcontent-%COMP%]   .subscriptions[_ngcontent-%COMP%]   .assign-warning[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{margin-right:5px;vertical-align:top}"],changeDetection:0}),(0,q.gn)([(0,v.Ph)(d.jq.user)],C.prototype,"user",void 0);const Vt=function(){return["/account/login"]},Wt=[{path:"login",component:Mt,data:{title:"Login"}},{path:"email/change-password",component:x,data:{title:"Change Password"}},{path:"email/login",component:it,data:{title:"Login"}},{path:"email/lost-password",component:Ct,data:{title:"Reset Password"}},{path:"email/register",component:ut,data:{title:"Register"}},{path:"unauthorized",component:(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:7,vars:2,consts:[[1,"mat-display-2","title"],[3,"routerLink"]],template:function(n,i){1&n&&(t.TgZ(0,"header",0),t._uU(1,"403 Unauthorized"),t.qZA(),t.TgZ(2,"h3"),t._uU(3,"Sorry! You are not authorized to view this page. Click "),t.TgZ(4,"a",1),t._uU(5,"here"),t.qZA(),t._uU(6," to login."),t.qZA()),2&n&&(t.xp6(4),t.Q6J("routerLink",t.DdM(1,Vt)))},directives:[m.yS],styles:["[_nghost-%COMP%]{display:block;padding-top:40px;text-align:center}",".title[_ngcontent-%COMP%]{margin-bottom:50px}","a[_ngcontent-%COMP%]{color:#90a4ae}"],changeDetection:0}),o})(),data:{title:"Unauthorized"}},{path:"",component:C}];let Gt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.Bz.forChild(Wt)],m.Bz]}),o})(),tn=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[L.o9,E.Cq,_.AV,N.m,Gt]]}),o})()}}]);